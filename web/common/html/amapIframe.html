<html>

	<head>
		<meta charset="UTF-8">
		<title>实时车辆信息</title>
		<script type="text/javascript" src="../jquery.min.js"></script>
	    <script type="text/javascript" src="../layer.js"></script>
		<script type="text/javascript" src="../common.js"></script>
		<link rel="stylesheet" type="text/css" href="../theme/default/gis.css"/>
		<link rel="stylesheet" type="text/css" href="../theme/default/style.css"/>
		<link rel="stylesheet" type="text/css" href="../theme/default/H-ui.min.css"/>
		<link rel="stylesheet" type="text/css" href="../theme/default/H-ui.reset.css"/>
		<style type="text/css">
			.bg-success {
				width: 150px;
			}
			div td {
				width: 16.66%;
			}
		</style>
	</head>

	<body>
		<div class="table_one table_top">
			<h3>底盘实时信息 </h3>
			<table border="0" cellspacing="0" cellpadding="0" class="table table-border table-bordered table-striped">
				<tbody>
					<tr>
						<td class="bg-success">时间:</td>
						<td colspan="5"><span name="FVCPTIMED" id="FVCPTIMED"></span></td>
					</tr>
					<tr>
						<td class="bg-success">发动机转速(r/min)：</td>
						<td><span name="TACHOMETER" id="TACHOMETER"></span></td>
						<td class="bg-success">水温(℃)：</td>
						<td><span name="WATERTEMPERATURE" id="WATERTEMPERATURE"></span></td>
						<td class="bg-success">车速(km/h)：</td>
						<td><span name="RUNNINGSPEED" id="RUNNINGSPEED"></span></td>
					</tr>
					<tr>
						<td class="bg-success">机油压力(kpa)：</td>
						<td><span name="ENGINEOILPRESS" id="ENGINEOILPRESS"></span></td>
						<td class="bg-success">燃油可用时间(h)：</td>
						<td><span name="OILAVAILABLETIME" id="OILAVAILABLETIME"></span></td>
						<td class="bg-success">燃料使用总量(L)：</td>
						<td><span name="FUELCONSUMPTION" id="FUELCONSUMPTION"></span></td>
					</tr>
					<tr>
						<td class="bg-success">瞬时油耗(L/h)：</td>
						<td><span name="INSTANTOILMASS" id="INSTANTOILMASS"></span></td>
						<td class="bg-success">平均油耗(L/100Km)：</td>
						<td><span name="AVEOILMASS" id="AVEOILMASS"></span></td>
						<td class="bg-success">剩余燃油百分比(%)：</td>
						<td><span name="OILMASS" id="OILMASS"></span></td>
					</tr>
					<tr>
						<td class="bg-success">总里程(Km)：</td>
						<td><span name="MILEAGE" id="MILEAGE"></span></td>
						<td class="bg-success">蓄电池电压(V)：</td>
						<td><span name="COULOMBMETER" id="COULOMBMETER"></span></td>
						<td class="bg-success">油门踏板位置(%)：</td>
						<td><span name="ACCELERATORPEDALPOSITION" id="ACCELERATORPEDALPOSITION"></span></td>
					</tr>
					<tr>

						<td class="bg-success">发动机工作小时(h):</td>
						<td><span name="ENGINETOTALHOURSOFOPERATION" id="ENGINETOTALHOURSOFOPERATION"></span></td>
						<td class="bg-success">机油温度(℃)：</td>
						<td><span name="ENGOILTEMP" id="ENGOILTEMP"></span></td>
						<td class="bg-success">燃油温度(℃)：</td>
						<td><span name="LOADCURRSPEED" id="LOADCURRSPEED"></span></td>
					</tr>
					<tr>
						<td class="bg-success">气压表1(kpa)：</td>
						<td><span name="AIRPRESS1" id="AIRPRESS1"></span></td>
						<td class="bg-success">气压表2(kpa)：</td>
						<td><span name="AIRPRESS2" id="AIRPRESS2"></span></td>
						<td class="bg-success"></td>
						<td></td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="table_one table_middle">
			<h3>上装实时信息</h3>
			<table border="0" cellspacing="0" cellpadding="0" class="table table-border table-bordered table-striped">
				<tbody>
					<tr>
						<td class="bg-success">时间:</td>
						<td colspan="5"><span name="FVAPTIMES" id="FVAPTIMES"></span></td>
					</tr>
					<tr>
						<td class="bg-success">水流量(L/S)：</td>
						<td><span name="WATERFLOW" id="WATERFLOW"></span></td>
						<td class="bg-success">水使用总量(T)：</td>
						<td><span name="WATERUSED" id="WATERUSED"></span></td>
						<td class="bg-success">水罐液位(%)：</td>
						<td><span name="HYDRIAWATERLEVEL" id="HYDRIAWATERLEVEL"></span></td>
					</tr>
					<tr>
						<td class="bg-success">泡沫流量(L/S)：</td>
						<td><span name="FOAMFLOW" id="FOAMFLOW"></span></td>
						<td class="bg-success">泡沫比例(%)：</td>
						<td><span name="FOAMRATE" id="FOAMRATE"></span></td>
						<td class="bg-success">A类泡沫罐液位(%)：</td>
						<td><span name="FOAMLEVELA" id="FOAMLEVELA"></span></td>
					</tr>
					<tr>
						<td class="bg-success">B类泡沫罐液位(%)：</td>
						<td><span name="FOAMLEVEL" id="FOAMLEVEL"></span></td>
						<td class="bg-success">水泵工作时间(min)：</td>
						<td><span name="PUMPWORKINGTIME" id="PUMPWORKINGTIME"></span></td>
						<td class="bg-success">泵转速(r/min)：</td>
						<td><span id="PUMPROTATESPEED" name="PUMPROTATESPEED"></span></td>
					</tr>
					<tr>
						<td class="bg-success">消防水泵出口压力(kpa)：</td>
						<td><span name="PUMPEXITPRESSURE" id="PUMPEXITPRESSURE"></span></td>
						<td class="bg-success">消防水泵入口压力(kpa)：</td>
						<td><span name="PUMPENTRYPRESSURE" id="PUMPENTRYPRESSURE"></span></td>
						<td class="bg-success">取力器温度(℃)：</td>
						<td><span name="POWERTAKEOFFTEMP" id="POWERTAKEOFFTEMP"></span></td>

					</tr>
				</tbody>
			</table>
		</div>

		<script type="text/javascript">
			$(document).ready(function(){
				getCarMessage();
			});

			function getCarMessage() {
				var id = GetQueryString("id");
				$.ajax({
					type : "GET",
			      	url : SERVER + "xiaofangcheById?id=" + id,
			      	async : false,
			      	success : function(data) {
			      		var carData = data.data;
			      		fulfillDataPage(carData);
		            }
		        });
			}

      function GetQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) {
          return decodeURI(r[2]);
        }
        return null;
      }


      function fulfillDataPage(carData){
				//底盘信息
				document.getElementById("FVCPTIMED").innerHTML = carData.tbCedpxx.fvcptime;
				if (carData.tbCedpxx.tachometer != -300 && carData.tbCedpxx.tachometer != "-300") {
        			document.getElementById("TACHOMETER").innerHTML = carData.tbCedpxx.tachometer;
        		} else {
        			document.getElementById("TACHOMETER").innerHTML = "";
        		}
				if (carData.tbCedpxx.watertemperature != -300 && carData.tbCedpxx.watertemperature != "-300") {
        			document.getElementById("WATERTEMPERATURE").innerHTML = carData.tbCedpxx.watertemperature;
        		} else {
        			document.getElementById("WATERTEMPERATURE").innerHTML = "";
        		}
				if (carData.tbCedpxx.runningspeed != -300 && carData.tbCedpxx.runningspeed != "-300") {
        			document.getElementById("RUNNINGSPEED").innerHTML = carData.tbCedpxx.runningspeed;
        		} else {
        			document.getElementById("RUNNINGSPEED").innerHTML = "";
        		}
				if (carData.tbCedpxx.engineoilpress != -300 && carData.tbCedpxx.engineoilpress != "-300") {
        			document.getElementById("ENGINEOILPRESS").innerHTML = carData.tbCedpxx.engineoilpress;
        		} else {
        			document.getElementById("ENGINEOILPRESS").innerHTML = "";
        		}
				if (carData.tbCedpxx.oilavailabletime != -300 && carData.tbCedpxx.oilavailabletime != "-300") {
        			document.getElementById("OILAVAILABLETIME").innerHTML = carData.tbCedpxx.oilavailabletime;
        		} else {
        			document.getElementById("OILAVAILABLETIME").innerHTML = "";
        		}
				if (carData.tbCedpxx.fuelconsumption != -300 && carData.tbCedpxx.fuelconsumption != "-300") {
        			document.getElementById("FUELCONSUMPTION").innerHTML = carData.tbCedpxx.fuelconsumption;
        		} else {
        			document.getElementById("FUELCONSUMPTION").innerHTML = "";
        		}
				if (carData.tbCedpxx.instantoilmass != -300 && carData.tbCedpxx.instantoilmass != "-300") {
        			document.getElementById("INSTANTOILMASS").innerHTML = carData.tbCedpxx.instantoilmass;
        		} else {
        			document.getElementById("INSTANTOILMASS").innerHTML = "";
        		}
				if (carData.tbCedpxx.aveoilmass != -300 && carData.tbCedpxx.aveoilmass != "-300") {
        			document.getElementById("AVEOILMASS").innerHTML = carData.tbCedpxx.aveoilmass;
        		} else {
        			document.getElementById("AVEOILMASS").innerHTML = "";
        		}
				if (carData.tbCedpxx.oilmass != -300 && carData.tbCedpxx.oilmass != "-300") {
        			document.getElementById("OILMASS").innerHTML = carData.tbCedpxx.oilmass;
        		} else {
        			document.getElementById("OILMASS").innerHTML = "";
        		}
				if (carData.tbCedpxx.mileage != -300 && carData.tbCedpxx.mileage != "-300") {
        			document.getElementById("MILEAGE").innerHTML = carData.tbCedpxx.mileage;
        		} else {
        			document.getElementById("MILEAGE").innerHTML = "";
        		}
				if (carData.tbCedpxx.coulombmeter != -300 && carData.tbCedpxx.coulombmeter != "-300") {
        			document.getElementById("COULOMBMETER").innerHTML = carData.tbCedpxx.coulombmeter;
        		} else {
        			document.getElementById("COULOMBMETER").innerHTML = "";
        		}
				if (carData.tbCedpxx.acceleratorpedalposition != -300 && carData.tbCedpxx.acceleratorpedalposition != "-300") {
        			document.getElementById("ACCELERATORPEDALPOSITION").innerHTML = carData.tbCedpxx.acceleratorpedalposition;
        		} else {
        			document.getElementById("ACCELERATORPEDALPOSITION").innerHTML = "";
        		}
				if (carData.tbCedpxx.enginetotalhoursofoperation != -300 && carData.tbCedpxx.enginetotalhoursofoperation != "-300") {
        			document.getElementById("ENGINETOTALHOURSOFOPERATION").innerHTML = carData.tbCedpxx.enginetotalhoursofoperation;
        		} else {
        			document.getElementById("ENGINETOTALHOURSOFOPERATION").innerHTML = "";
        		}
				if (carData.tbCedpxx.engoiltemp != -300 && carData.tbCedpxx.engoiltemp != "-300") {
        			document.getElementById("ENGOILTEMP").innerHTML = carData.tbCedpxx.engoiltemp;
        		} else {
        			document.getElementById("ENGOILTEMP").innerHTML = "";
        		}
				if (carData.tbCedpxx.loadcurrspeed != -300 && carData.tbCedpxx.loadcurrspeed != "-300") {
        			document.getElementById("LOADCURRSPEED").innerHTML = carData.tbCedpxx.loadcurrspeed;
        		} else {
        			document.getElementById("LOADCURRSPEED").innerHTML = "";
        		}
				if (carData.tbCedpxx.airpress1 != -300 && carData.tbCedpxx.airpress1 != "-300") {
        			document.getElementById("AIRPRESS1").innerHTML = carData.tbCedpxx.airpress1;
        		} else {
        			document.getElementById("AIRPRESS1").innerHTML = "";
        		}
				if (carData.tbCedpxx.airpress2 != -300 && carData.tbCedpxx.airpress2 != "-300") {
        			document.getElementById("AIRPRESS2").innerHTML = carData.tbCedpxx.airpress2;
        		} else {
        			document.getElementById("AIRPRESS2").innerHTML = "";
        		}
				//上装信息
				document.getElementById("FVAPTIMES").innerHTML = carData.tbCeszxx.fvaptime;
				if (carData.tbCeszxx.waterflow != -300 && carData.tbCeszxx.waterflow != "-300") {
        			document.getElementById("WATERFLOW").innerHTML = carData.tbCeszxx.waterflow;
        		} else {
        			document.getElementById("WATERFLOW").innerHTML = "";
        		}
				if (carData.tbCeszxx.waterused != -300 && carData.tbCeszxx.waterused != "-300") {
        			document.getElementById("WATERUSED").innerHTML = carData.tbCeszxx.waterused;
        		} else {
        			document.getElementById("WATERUSED").innerHTML = "";
        		}
				if (carData.tbCeszxx.hydriawaterlevel != -300 && carData.tbCeszxx.hydriawaterlevel != "-300") {
        			document.getElementById("HYDRIAWATERLEVEL").innerHTML = carData.tbCeszxx.hydriawaterlevel;
        		} else {
        			document.getElementById("HYDRIAWATERLEVEL").innerHTML = "";
        		}
				if (carData.tbCeszxx.foamflow != -300 && carData.tbCeszxx.foamflow != "-300") {
        			document.getElementById("FOAMFLOW").innerHTML = carData.tbCeszxx.foamflow;
        		} else {
        			document.getElementById("FOAMFLOW").innerHTML = "";
        		}
				if (carData.tbCeszxx.foamrate != -300 && carData.tbCeszxx.foamrate != "-300") {
        			document.getElementById("FOAMRATE").innerHTML = carData.tbCeszxx.foamrate;
        		} else {
        			document.getElementById("FOAMRATE").innerHTML = "";
        		}
				if (carData.tbCeszxx.foamlevel != -300 && carData.tbCeszxx.foamlevel != "-300") {
        			document.getElementById("FOAMLEVELA").innerHTML = carData.tbCeszxx.foamlevel;
        		} else {
        			document.getElementById("FOAMLEVELA").innerHTML = "";
        		}
				document.getElementById("FOAMLEVEL").innerHTML = "";
				if (carData.tbCeszxx.pumpworkingtime != -300 && carData.tbCeszxx.pumpworkingtime != "-300") {
        			document.getElementById("PUMPWORKINGTIME").innerHTML = carData.tbCeszxx.pumpworkingtime;
        		} else {
        			document.getElementById("PUMPWORKINGTIME").innerHTML = "";
        		}
				if (carData.tbCeszxx.pumprotatespeed != -300 && carData.tbCeszxx.pumprotatespeed != "-300") {
        			document.getElementById("PUMPROTATESPEED").innerHTML = carData.tbCeszxx.pumprotatespeed;
        		} else {
        			document.getElementById("PUMPROTATESPEED").innerHTML = "";
        		}
				if (carData.tbCeszxx.pumpexitpressure != -300 && carData.tbCeszxx.pumpexitpressure != "-300") {
        			document.getElementById("PUMPEXITPRESSURE").innerHTML = carData.tbCeszxx.pumpexitpressure;
        		} else {
        			document.getElementById("PUMPEXITPRESSURE").innerHTML = "";
        		}
				if (carData.tbCeszxx.pumpentrypressure != -300 && carData.tbCeszxx.pumpentrypressure != "-300") {
        			document.getElementById("PUMPENTRYPRESSURE").innerHTML = carData.tbCeszxx.pumpentrypressure;
        		} else {
        			document.getElementById("PUMPENTRYPRESSURE").innerHTML = "";
        		}
				if (carData.tbCeszxx.powertakeofftemp != -300 && carData.tbCeszxx.powertakeofftemp != "-300") {
        			document.getElementById("POWERTAKEOFFTEMP").innerHTML = carData.tbCeszxx.powertakeofftemp;
        		} else {
        			document.getElementById("POWERTAKEOFFTEMP").innerHTML = "";
        		}
			}

			window.setInterval(getCarMessage, 5000);

		</script>

	</body>

</html>
